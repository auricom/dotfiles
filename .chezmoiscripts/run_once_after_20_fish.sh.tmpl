#!/usr/bin/env bash

# Fish configuration script

set -euo pipefail

# Source utility functions
source "{{ .chezmoi.homeDir }}/.local/lib/chezmoi_utils.sh"

main() {
    log_section "Configuring Fish shell"

    log_info "Chaging default shell to Fish"
    sudo usermod -s $(which fish) "${USER}"

    # Install Fisher if not present
    if [[ ! -f "${HOME}/.config/fish/functions/fisher.fish" ]]; then
        log_info "Installing Fisher package manager"
        fish -c "curl -sL https://git.io/fisher | source && fisher install jorgebucaran/fisher"
    else
        log_info "Fisher already installed"
    fi

    log_info "Sudo configuration completed"
}

# Run main function
main "$@"
